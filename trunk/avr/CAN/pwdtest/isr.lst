GAS LISTING /tmp/ccTCrLhD.s 			page 1


   1               		.file	"isr.c"
   2               	__SREG__ = 0x3f
   3               	__SP_H__ = 0x3e
   4               	__SP_L__ = 0x3d
   5               	__CCP__  = 0x34
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.global __do_copy_data
   9               		.global __do_clear_bss
  10               		.stabs	"/home/morten/Documents/unicorn-racing/avr/CAN/pwdtest/",100,0,2,.Ltext0
  11               		.stabs	"isr.c",100,0,2,.Ltext0
  12               		.text
  13               	.Ltext0:
  14               		.stabs	"gcc2_compiled.",60,0,0,0
  15               		.stabs	"int:t(0,1)=r(0,1);-32768;32767;",128,0,1,0
  16               		.stabs	"char:t(0,2)=@s8;r(0,2);0;255;",128,0,1,0
  17               		.stabs	"long int:t(0,3)=@s32;r(0,3);020000000000;017777777777;",128,0,1,0
  18               		.stabs	"unsigned int:t(0,4)=r(0,4);0;0177777;",128,0,1,0
  19               		.stabs	"long unsigned int:t(0,5)=@s32;r(0,5);0;037777777777;",128,0,1,0
  20               		.stabs	"long long int:t(0,6)=@s64;r(0,6);01000000000000000000000;0777777777777777777777;",128,0,1,
  21               		.stabs	"long long unsigned int:t(0,7)=@s64;r(0,7);0;01777777777777777777777;",128,0,1,0
  22               		.stabs	"short int:t(0,8)=r(0,8);-32768;32767;",128,0,1,0
  23               		.stabs	"short unsigned int:t(0,9)=r(0,9);0;0177777;",128,0,1,0
  24               		.stabs	"signed char:t(0,10)=@s8;r(0,10);-128;127;",128,0,1,0
  25               		.stabs	"unsigned char:t(0,11)=@s8;r(0,11);0;255;",128,0,1,0
  26               		.stabs	"float:t(0,12)=r(0,1);4;0;",128,0,1,0
  27               		.stabs	"double:t(0,13)=r(0,1);4;0;",128,0,1,0
  28               		.stabs	"long double:t(0,14)=r(0,1);4;0;",128,0,1,0
  29               		.stabs	"void:t(0,15)=(0,15)",128,0,1,0
  30               		.stabs	"/usr/lib/gcc/avr/4.3.4/../../../avr/include/avr/io.h",130,0,0,0
  31               		.stabs	"/usr/lib/gcc/avr/4.3.4/../../../avr/include/avr/sfr_defs.h",130,0,0,0
  32               		.stabs	"/usr/lib/gcc/avr/4.3.4/../../../avr/include/inttypes.h",130,0,0,0
  33               		.stabs	"/usr/lib/gcc/avr/4.3.4/../../../avr/include/stdint.h",130,0,0,0
  34               		.stabs	"int8_t:t(4,1)=(0,10)",128,0,121,0
  35               		.stabs	"uint8_t:t(4,2)=(0,11)",128,0,122,0
  36               		.stabs	"int16_t:t(4,3)=(0,1)",128,0,123,0
  37               		.stabs	"uint16_t:t(4,4)=(0,4)",128,0,124,0
  38               		.stabs	"int32_t:t(4,5)=(0,3)",128,0,125,0
  39               		.stabs	"uint32_t:t(4,6)=(0,5)",128,0,126,0
  40               		.stabs	"int64_t:t(4,7)=(0,6)",128,0,128,0
  41               		.stabs	"uint64_t:t(4,8)=(0,7)",128,0,129,0
  42               		.stabs	"intptr_t:t(4,9)=(4,3)",128,0,142,0
  43               		.stabs	"uintptr_t:t(4,10)=(4,4)",128,0,147,0
  44               		.stabs	"int_least8_t:t(4,11)=(4,1)",128,0,159,0
  45               		.stabs	"uint_least8_t:t(4,12)=(4,2)",128,0,164,0
  46               		.stabs	"int_least16_t:t(4,13)=(4,3)",128,0,169,0
  47               		.stabs	"uint_least16_t:t(4,14)=(4,4)",128,0,174,0
  48               		.stabs	"int_least32_t:t(4,15)=(4,5)",128,0,179,0
  49               		.stabs	"uint_least32_t:t(4,16)=(4,6)",128,0,184,0
  50               		.stabs	"int_least64_t:t(4,17)=(4,7)",128,0,192,0
  51               		.stabs	"uint_least64_t:t(4,18)=(4,8)",128,0,199,0
  52               		.stabs	"int_fast8_t:t(4,19)=(4,1)",128,0,213,0
  53               		.stabs	"uint_fast8_t:t(4,20)=(4,2)",128,0,218,0
  54               		.stabs	"int_fast16_t:t(4,21)=(4,3)",128,0,223,0
  55               		.stabs	"uint_fast16_t:t(4,22)=(4,4)",128,0,228,0
  56               		.stabs	"int_fast32_t:t(4,23)=(4,5)",128,0,233,0
  57               		.stabs	"uint_fast32_t:t(4,24)=(4,6)",128,0,238,0
GAS LISTING /tmp/ccTCrLhD.s 			page 2


  58               		.stabs	"int_fast64_t:t(4,25)=(4,7)",128,0,246,0
  59               		.stabs	"uint_fast64_t:t(4,26)=(4,8)",128,0,253,0
  60               		.stabs	"intmax_t:t(4,27)=(4,7)",128,0,273,0
  61               		.stabs	"uintmax_t:t(4,28)=(4,8)",128,0,278,0
  62               		.stabn	162,0,0,0
  63               		.stabs	"int_farptr_t:t(3,1)=(4,5)",128,0,77,0
  64               		.stabs	"uint_farptr_t:t(3,2)=(4,6)",128,0,81,0
  65               		.stabn	162,0,0,0
  66               		.stabn	162,0,0,0
  67               		.stabs	"/usr/lib/gcc/avr/4.3.4/../../../avr/include/avr/fuse.h",130,0,0,0
  68               		.stabs	"__fuse_t:t(5,1)=(5,2)=s3low:(0,11),0,8;high:(0,11),8,8;extended:(0,11),16,8;;",128,0,239,0
  69               		.stabn	162,0,0,0
  70               		.stabn	162,0,0,0
  71               		.stabs	"/usr/lib/gcc/avr/4.3.4/../../../avr/include/stdlib.h",130,0,0,0
  72               		.stabs	"/usr/lib/gcc/avr/4.3.4/include/stddef.h",130,0,0,0
  73               		.stabs	"size_t:t(7,1)=(0,4)",128,0,214,0
  74               		.stabs	"wchar_t:t(7,2)=(0,1)",128,0,326,0
  75               		.stabn	162,0,0,0
  76               		.stabs	"div_t:t(6,1)=(6,2)=s4quot:(0,1),0,16;rem:(0,1),16,16;;",128,0,71,0
  77               		.stabs	"ldiv_t:t(6,3)=(6,4)=s8quot:(0,3),0,32;rem:(0,3),32,32;;",128,0,77,0
  78               		.stabs	"__compar_fn_t:t(6,5)=(6,6)=*(6,7)=f(0,1)",128,0,80,0
  79               		.stabn	162,0,0,0
  80               		.stabs	"__vector_18:F(0,15)",36,0,33,__vector_18
  81               	.global	__vector_18
  82               		.type	__vector_18, @function
  83               	__vector_18:
  84               		.stabd	46,0,0
   0:isr.c         **** #include <config.h>
   1:isr.c         **** #include <prototyper.h>
   2:isr.c         **** #include <avr/io.h>
   3:isr.c         **** #include <stdlib.h>
   4:isr.c         **** #include <avr/interrupt.h>
   5:isr.c         **** 
   6:isr.c         **** /*********************************************
   7:isr.c         ****  * AVR atMega644P Interrupt-service-rutiner
   8:isr.c         ****  *********************************************/
   9:isr.c         **** 
  10:isr.c         **** void sendtekst(char *);
  11:isr.c         **** void PWM_duty_cycle_A_set(unsigned int);
  12:isr.c         **** void PWM_duty_cycle_B_set(unsigned int);
  13:isr.c         **** void PWM_duty_cycle_A16_set(unsigned int);
  14:isr.c         **** 
  15:isr.c         **** // Variable
  16:isr.c         **** char count = 0;
  17:isr.c         **** char retning = 0;
  18:isr.c         **** unsigned int speed = 0;
  19:isr.c         **** 
  20:isr.c         **** extern int kp;
  21:isr.c         **** extern float ki;
  22:isr.c         **** extern int ref;
  23:isr.c         **** extern unsigned int ADCconv;
  24:isr.c         **** 
  25:isr.c         **** unsigned int adlow = 0;
  26:isr.c         **** unsigned int adhigh = 0;
  27:isr.c         **** 
  28:isr.c         **** char channel = 0;
  29:isr.c         **** 
GAS LISTING /tmp/ccTCrLhD.s 			page 3


  30:isr.c         **** // Timer0 (8-bit) overflow interrupt
  31:isr.c         **** ISR(TIMER0_OVF_vect)
  32:isr.c         **** {	
  85               		.stabn	68,0,33,.LM0-.LFBB1
  86               	.LM0:
  87               	.LFBB1:
  88 0000 1F92      		push __zero_reg__
  89 0002 0F92      		push r0
  90 0004 0FB6      		in r0,__SREG__
  91 0006 0F92      		push r0
  92 0008 1124      		clr __zero_reg__
  93 000a 8F93      		push r24
  94 000c 9F93      		push r25
  95               	/* prologue: Signal */
  96               	/* frame size = 0 */
  33:isr.c         **** 	ADMUX &= 0xf8;
  97               		.stabn	68,0,34,.LM1-.LFBB1
  98               	.LM1:
  99 000e 8091 7C00 		lds r24,124
 100 0012 887F      		andi r24,lo8(-8)
 101 0014 8093 7C00 		sts 124,r24
  34:isr.c         **** 	ADMUX |= channel++;
 102               		.stabn	68,0,35,.LM2-.LFBB1
 103               	.LM2:
 104 0018 8091 7C00 		lds r24,124
 105 001c 9091 0000 		lds r25,channel
 106 0020 892B      		or r24,r25
 107 0022 8093 7C00 		sts 124,r24
 108 0026 9F5F      		subi r25,lo8(-(1))
 109 0028 9093 0000 		sts channel,r25
  35:isr.c         **** 	ADCSRA|=(1<<ADSC);
 110               		.stabn	68,0,36,.LM3-.LFBB1
 111               	.LM3:
 112 002c 8091 7A00 		lds r24,122
 113 0030 8064      		ori r24,lo8(64)
 114 0032 8093 7A00 		sts 122,r24
  36:isr.c         **** 
  37:isr.c         **** 	if(channel>=ADCtotnum)
 115               		.stabn	68,0,38,.LM4-.LFBB1
 116               	.LM4:
 117 0036 9330      		cpi r25,lo8(3)
 118 0038 00F0      		brlo .L3
  38:isr.c         **** 		channel = 0;
 119               		.stabn	68,0,39,.LM5-.LFBB1
 120               	.LM5:
 121 003a 1092 0000 		sts channel,__zero_reg__
 122               	.L3:
 123               	/* epilogue start */
  39:isr.c         **** }
 124               		.stabn	68,0,40,.LM6-.LFBB1
 125               	.LM6:
 126 003e 9F91      		pop r25
 127 0040 8F91      		pop r24
 128 0042 0F90      		pop r0
 129 0044 0FBE      		out __SREG__,r0
 130 0046 0F90      		pop r0
 131 0048 1F90      		pop __zero_reg__
GAS LISTING /tmp/ccTCrLhD.s 			page 4


 132 004a 1895      		reti
 133               		.size	__vector_18, .-__vector_18
 134               	.Lscope1:
 135               		.stabs	"",36,0,0,.Lscope1-.LFBB1
 136               		.stabd	78,0,0
 137               		.stabs	"__vector_20:F(0,15)",36,0,70,__vector_20
 138               	.global	__vector_20
 139               		.type	__vector_20, @function
 140               	__vector_20:
 141               		.stabd	46,0,0
  40:isr.c         **** 
  41:isr.c         **** // ADC convert complete
  42:isr.c         **** ISR(ADC_vect)
  43:isr.c         **** {
  44:isr.c         **** 	char tempchar[5];
  45:isr.c         **** 	char channel = 0;
  46:isr.c         **** 
  47:isr.c         **** 	channel = ADMUX & 0x07;
  48:isr.c         **** 
  49:isr.c         ****     adlow=ADCL;
  50:isr.c         ****     adhigh=ADCH;
  51:isr.c         **** 	ADCconv = (unsigned int)((adhigh<<8)|(adlow & 0xFF));	
  52:isr.c         **** /*	
  53:isr.c         **** 	sendtekst("  ADC ");
  54:isr.c         **** 	itoa(channel, tempchar,10); 
  55:isr.c         **** 	sendtekst(tempchar);
  56:isr.c         **** 	sendtekst(":");
  57:isr.c         **** 	itoa(ADCconv, tempchar,10); 
  58:isr.c         **** 	sendtekst(tempchar);
  59:isr.c         **** */
  60:isr.c         **** 	if(channel == 0)
  61:isr.c         **** 		presscontroller(ADCconv);
  62:isr.c         **** 
  63:isr.c         **** 	//if(channel>=ADCtotnum-1)
  64:isr.c         **** 	//	sendtekst("\n\r");
  65:isr.c         **** }
  66:isr.c         **** 
  67:isr.c         ****  //----- UART Interrupt --------------------------------------------------------
  68:isr.c         **** ISR(USART0_RX_vect)
  69:isr.c         **** {
 142               		.stabn	68,0,70,.LM7-.LFBB2
 143               	.LM7:
 144               	.LFBB2:
 145 004c 1F92      		push __zero_reg__
 146 004e 0F92      		push r0
 147 0050 0FB6      		in r0,__SREG__
 148 0052 0F92      		push r0
 149 0054 1124      		clr __zero_reg__
 150 0056 2F93      		push r18
 151 0058 3F93      		push r19
 152 005a 4F93      		push r20
 153 005c 5F93      		push r21
 154 005e 6F93      		push r22
 155 0060 7F93      		push r23
 156 0062 8F93      		push r24
 157 0064 9F93      		push r25
 158 0066 AF93      		push r26
GAS LISTING /tmp/ccTCrLhD.s 			page 5


 159 0068 BF93      		push r27
 160 006a EF93      		push r30
 161 006c FF93      		push r31
 162               	/* prologue: Signal */
 163               	/* frame size = 0 */
  70:isr.c         **** 	char data;
  71:isr.c         **** 	char tempchar[5];	
  72:isr.c         **** 	data = UDR0;	// Lægger data fra seriel bufffer i variabel
 164               		.stabn	68,0,73,.LM8-.LFBB2
 165               	.LM8:
 166 006e 8091 C600 		lds r24,198
  73:isr.c         **** 
  74:isr.c         ****     if(data == 'x')
 167               		.stabn	68,0,75,.LM9-.LFBB2
 168               	.LM9:
 169 0072 8837      		cpi r24,lo8(120)
 170 0074 01F0      		breq .L36
  75:isr.c         ****     {
  76:isr.c         ****     ref++;
  77:isr.c         ****     }
  78:isr.c         **** 
  79:isr.c         ****     if(data == 'z')
 171               		.stabn	68,0,80,.LM10-.LFBB2
 172               	.LM10:
 173 0076 8A37      		cpi r24,lo8(122)
 174 0078 01F0      		breq .L37
  80:isr.c         ****     {
  81:isr.c         ****     ref--;
  82:isr.c         ****     }
  83:isr.c         **** 
  84:isr.c         ****     if(data == '<')
 175               		.stabn	68,0,85,.LM11-.LFBB2
 176               	.LM11:
 177 007a 8C33      		cpi r24,lo8(60)
 178 007c 01F4      		brne .L10
  85:isr.c         ****     {
  86:isr.c         ****     ref = 110;
 179               		.stabn	68,0,87,.LM12-.LFBB2
 180               	.LM12:
 181 007e 8EE6      		ldi r24,lo8(110)
 182 0080 90E0      		ldi r25,hi8(110)
 183 0082 9093 0000 		sts (ref)+1,r25
 184 0086 8093 0000 		sts ref,r24
 185               	.L33:
 186               	/* epilogue start */
  87:isr.c         ****     }
  88:isr.c         **** 
  89:isr.c         ****     if(data == 'i')
  90:isr.c         ****     {
  91:isr.c         ****     ki = ki+0.1;
  92:isr.c         ****     }
  93:isr.c         **** 
  94:isr.c         ****     if(data == 'j')
  95:isr.c         ****     {
  96:isr.c         ****     ki = ki-0.1;
  97:isr.c         ****     }
  98:isr.c         **** 
GAS LISTING /tmp/ccTCrLhD.s 			page 6


  99:isr.c         ****     if(data == 'p')
 100:isr.c         ****     {
 101:isr.c         ****     kp++;
 102:isr.c         ****     }
 103:isr.c         **** 
 104:isr.c         ****     if(data == 'l')
 105:isr.c         ****     {
 106:isr.c         ****     kp--;
 107:isr.c         ****     }
 108:isr.c         **** 
 109:isr.c         ****     if(data == 'c')
 110:isr.c         ****     {
 111:isr.c         ****     PWM_duty_cycle_A16_set(0);
 112:isr.c         ****     }
 113:isr.c         **** 
 114:isr.c         ****     if(data == 'v')
 115:isr.c         ****     {
 116:isr.c         ****     PWM_duty_cycle_A16_set(1023);
 117:isr.c         ****     }
 118:isr.c         **** 
 119:isr.c         ****     if(data == 'o')
 120:isr.c         ****     {
 121:isr.c         ****         speed = speed + 16;
 122:isr.c         **** 
 123:isr.c         ****         if(speed>=1023)
 124:isr.c         ****             speed = 1023;
 125:isr.c         ****     PWM_duty_cycle_A16_set(speed);
 126:isr.c         ****     }
 127:isr.c         **** 
 128:isr.c         ****     if(data == 'n')
 129:isr.c         ****     {
 130:isr.c         ****         if(speed<16)
 131:isr.c         ****             speed = 16;
 132:isr.c         **** 
 133:isr.c         ****     speed = speed - 16;
 134:isr.c         ****     PWM_duty_cycle_A16_set(speed);
 135:isr.c         ****     }
 136:isr.c         **** 
 137:isr.c         ****     if(data == 'a')
 138:isr.c         ****     {
 139:isr.c         ****         count = 0;
 140:isr.c         ****         retning = 0;
 141:isr.c         ****         PWM_duty_cycle_A_set(0);
 142:isr.c         **** 	    PWM_duty_cycle_B_set(0);
 143:isr.c         ****     }
 144:isr.c         **** 
 145:isr.c         ****     if(data == 'd')
 146:isr.c         ****     {
 147:isr.c         ****         count = 0;
 148:isr.c         ****         retning = 1;
 149:isr.c         ****         PWM_duty_cycle_A_set(0);
 150:isr.c         **** 	    PWM_duty_cycle_B_set(0);
 151:isr.c         ****     }
 152:isr.c         **** 	
 153:isr.c         **** 	if(data == 'w')
 154:isr.c         **** 	{
 155:isr.c         ****         if(count>=254)
GAS LISTING /tmp/ccTCrLhD.s 			page 7


 156:isr.c         ****             count = 254;
 157:isr.c         **** 
 158:isr.c         ****         count++;
 159:isr.c         **** 
 160:isr.c         ****         if(retning)
 161:isr.c         **** 		    PWM_duty_cycle_A_set(count);
 162:isr.c         ****         else
 163:isr.c         ****             PWM_duty_cycle_B_set(count);
 164:isr.c         **** 	}	
 165:isr.c         **** 	if(data == 's')
 166:isr.c         **** 	{
 167:isr.c         ****         if(count<=1)
 168:isr.c         ****             count = 1;            
 169:isr.c         **** 
 170:isr.c         ****         count--;
 171:isr.c         ****         
 172:isr.c         ****         if(retning)        
 173:isr.c         **** 		    PWM_duty_cycle_A_set(count);
 174:isr.c         ****         else
 175:isr.c         ****             PWM_duty_cycle_B_set(count);
 176:isr.c         **** 	}
 177:isr.c         **** 	if(data == 'q')
 178:isr.c         **** 	{
 179:isr.c         ****         if(count>=254)
 180:isr.c         ****             count = 254;
 181:isr.c         **** 
 182:isr.c         ****         count = 255;
 183:isr.c         **** 
 184:isr.c         ****         if(retning)
 185:isr.c         **** 		    PWM_duty_cycle_A_set(count);
 186:isr.c         ****         else
 187:isr.c         ****             PWM_duty_cycle_B_set(count);
 188:isr.c         **** 	}
 189:isr.c         **** 	if(data == 'e')
 190:isr.c         **** 	{
 191:isr.c         ****         if(count>=254)
 192:isr.c         ****             count = 254;
 193:isr.c         **** 
 194:isr.c         ****         count = 0;
 195:isr.c         **** 
 196:isr.c         ****         if(retning)
 197:isr.c         **** 		    PWM_duty_cycle_A_set(count);
 198:isr.c         ****         else
 199:isr.c         ****             PWM_duty_cycle_B_set(count);
 200:isr.c         **** 	}	
 201:isr.c         **** /*	
 202:isr.c         **** 	itoa(count, tempchar,10); 
 203:isr.c         **** 	sendtekst(tempchar);
 204:isr.c         ****     sendtekst(";");
 205:isr.c         **** 	itoa(speed, tempchar,10); 
 206:isr.c         **** 	sendtekst(tempchar);
 207:isr.c         ****     sendtekst("\n\r");
 208:isr.c         **** */
 209:isr.c         **** }
 187               		.stabn	68,0,210,.LM13-.LFBB2
 188               	.LM13:
 189 008a FF91      		pop r31
GAS LISTING /tmp/ccTCrLhD.s 			page 8


 190 008c EF91      		pop r30
 191 008e BF91      		pop r27
 192 0090 AF91      		pop r26
 193 0092 9F91      		pop r25
 194 0094 8F91      		pop r24
 195 0096 7F91      		pop r23
 196 0098 6F91      		pop r22
 197 009a 5F91      		pop r21
 198 009c 4F91      		pop r20
 199 009e 3F91      		pop r19
 200 00a0 2F91      		pop r18
 201 00a2 0F90      		pop r0
 202 00a4 0FBE      		out __SREG__,r0
 203 00a6 0F90      		pop r0
 204 00a8 1F90      		pop __zero_reg__
 205 00aa 1895      		reti
 206               	.L37:
  82:isr.c         ****     ref--;
 207               		.stabn	68,0,82,.LM14-.LFBB2
 208               	.LM14:
 209 00ac 8091 0000 		lds r24,ref
 210 00b0 9091 0000 		lds r25,(ref)+1
 211 00b4 0197      		sbiw r24,1
 212 00b6 9093 0000 		sts (ref)+1,r25
 213 00ba 8093 0000 		sts ref,r24
 214 00be 00C0      		rjmp .L33
 215               	.L36:
  77:isr.c         ****     ref++;
 216               		.stabn	68,0,77,.LM15-.LFBB2
 217               	.LM15:
 218 00c0 8091 0000 		lds r24,ref
 219 00c4 9091 0000 		lds r25,(ref)+1
 220 00c8 0196      		adiw r24,1
 221 00ca 9093 0000 		sts (ref)+1,r25
 222 00ce 8093 0000 		sts ref,r24
 223 00d2 00C0      		rjmp .L33
 224               	.L10:
  90:isr.c         ****     if(data == 'i')
 225               		.stabn	68,0,90,.LM16-.LFBB2
 226               	.LM16:
 227 00d4 8936      		cpi r24,lo8(105)
 228 00d6 01F4      		brne .L7
  92:isr.c         ****     ki = ki+0.1;
 229               		.stabn	68,0,92,.LM17-.LFBB2
 230               	.LM17:
 231 00d8 6091 0000 		lds r22,ki
 232 00dc 7091 0000 		lds r23,(ki)+1
 233 00e0 8091 0000 		lds r24,(ki)+2
 234 00e4 9091 0000 		lds r25,(ki)+3
 235 00e8 2DEC      		ldi r18,lo8(0x3dcccccd)
 236 00ea 3CEC      		ldi r19,hi8(0x3dcccccd)
 237 00ec 4CEC      		ldi r20,hlo8(0x3dcccccd)
 238 00ee 5DE3      		ldi r21,hhi8(0x3dcccccd)
 239 00f0 0E94 0000 		call __addsf3
 240 00f4 6093 0000 		sts ki,r22
 241 00f8 7093 0000 		sts (ki)+1,r23
 242 00fc 8093 0000 		sts (ki)+2,r24
GAS LISTING /tmp/ccTCrLhD.s 			page 9


 243 0100 9093 0000 		sts (ki)+3,r25
 244 0104 00C0      		rjmp .L33
 245               	.L7:
  95:isr.c         ****     if(data == 'j')
 246               		.stabn	68,0,95,.LM18-.LFBB2
 247               	.LM18:
 248 0106 8A36      		cpi r24,lo8(106)
 249 0108 01F4      		brne .L9
  97:isr.c         ****     ki = ki-0.1;
 250               		.stabn	68,0,97,.LM19-.LFBB2
 251               	.LM19:
 252 010a 6091 0000 		lds r22,ki
 253 010e 7091 0000 		lds r23,(ki)+1
 254 0112 8091 0000 		lds r24,(ki)+2
 255 0116 9091 0000 		lds r25,(ki)+3
 256 011a 2DEC      		ldi r18,lo8(0x3dcccccd)
 257 011c 3CEC      		ldi r19,hi8(0x3dcccccd)
 258 011e 4CEC      		ldi r20,hlo8(0x3dcccccd)
 259 0120 5DE3      		ldi r21,hhi8(0x3dcccccd)
 260 0122 0E94 0000 		call __subsf3
 261 0126 6093 0000 		sts ki,r22
 262 012a 7093 0000 		sts (ki)+1,r23
 263 012e 8093 0000 		sts (ki)+2,r24
 264 0132 9093 0000 		sts (ki)+3,r25
 265 0136 00C0      		rjmp .L33
 266               	.L9:
 100:isr.c         ****     if(data == 'p')
 267               		.stabn	68,0,100,.LM20-.LFBB2
 268               	.LM20:
 269 0138 8037      		cpi r24,lo8(112)
 270 013a 01F4      		brne .L11
 102:isr.c         ****     kp++;
 271               		.stabn	68,0,102,.LM21-.LFBB2
 272               	.LM21:
 273 013c 8091 0000 		lds r24,kp
 274 0140 9091 0000 		lds r25,(kp)+1
 275 0144 0196      		adiw r24,1
 276 0146 9093 0000 		sts (kp)+1,r25
 277 014a 8093 0000 		sts kp,r24
 278 014e 00C0      		rjmp .L33
 279               	.L11:
 105:isr.c         ****     if(data == 'l')
 280               		.stabn	68,0,105,.LM22-.LFBB2
 281               	.LM22:
 282 0150 8C36      		cpi r24,lo8(108)
 283 0152 01F4      		brne .L12
 107:isr.c         ****     kp--;
 284               		.stabn	68,0,107,.LM23-.LFBB2
 285               	.LM23:
 286 0154 8091 0000 		lds r24,kp
 287 0158 9091 0000 		lds r25,(kp)+1
 288 015c 0197      		sbiw r24,1
 289 015e 9093 0000 		sts (kp)+1,r25
 290 0162 8093 0000 		sts kp,r24
 291 0166 00C0      		rjmp .L33
 292               	.L12:
 110:isr.c         ****     if(data == 'c')
GAS LISTING /tmp/ccTCrLhD.s 			page 10


 293               		.stabn	68,0,110,.LM24-.LFBB2
 294               	.LM24:
 295 0168 8336      		cpi r24,lo8(99)
 296 016a 01F4      		brne .L13
 112:isr.c         ****     PWM_duty_cycle_A16_set(0);
 297               		.stabn	68,0,112,.LM25-.LFBB2
 298               	.LM25:
 299 016c 80E0      		ldi r24,lo8(0)
 300 016e 90E0      		ldi r25,hi8(0)
 301 0170 0E94 0000 		call PWM_duty_cycle_A16_set
 302 0174 00C0      		rjmp .L33
 303               	.L13:
 115:isr.c         ****     if(data == 'v')
 304               		.stabn	68,0,115,.LM26-.LFBB2
 305               	.LM26:
 306 0176 8637      		cpi r24,lo8(118)
 307 0178 01F4      		brne .L14
 117:isr.c         ****     PWM_duty_cycle_A16_set(1023);
 308               		.stabn	68,0,117,.LM27-.LFBB2
 309               	.LM27:
 310 017a 8FEF      		ldi r24,lo8(1023)
 311 017c 93E0      		ldi r25,hi8(1023)
 312 017e 0E94 0000 		call PWM_duty_cycle_A16_set
 313 0182 00C0      		rjmp .L33
 314               	.L14:
 120:isr.c         ****     if(data == 'o')
 315               		.stabn	68,0,120,.LM28-.LFBB2
 316               	.LM28:
 317 0184 8F36      		cpi r24,lo8(111)
 318 0186 01F4      		brne .L15
 122:isr.c         ****         speed = speed + 16;
 319               		.stabn	68,0,122,.LM29-.LFBB2
 320               	.LM29:
 321 0188 8091 0000 		lds r24,speed
 322 018c 9091 0000 		lds r25,(speed)+1
 323 0190 4096      		adiw r24,16
 324 0192 9093 0000 		sts (speed)+1,r25
 325 0196 8093 0000 		sts speed,r24
 124:isr.c         ****         if(speed>=1023)
 326               		.stabn	68,0,124,.LM30-.LFBB2
 327               	.LM30:
 328 019a 23E0      		ldi r18,hi8(1023)
 329 019c 8F3F      		cpi r24,lo8(1023)
 330 019e 9207      		cpc r25,r18
 331 01a0 00F0      		brlo .L34
 125:isr.c         ****             speed = 1023;
 332               		.stabn	68,0,125,.LM31-.LFBB2
 333               	.LM31:
 334 01a2 8FEF      		ldi r24,lo8(1023)
 335 01a4 93E0      		ldi r25,hi8(1023)
 336 01a6 9093 0000 		sts (speed)+1,r25
 337 01aa 8093 0000 		sts speed,r24
 338               	.L34:
 135:isr.c         ****     PWM_duty_cycle_A16_set(speed);
 339               		.stabn	68,0,135,.LM32-.LFBB2
 340               	.LM32:
 341 01ae 0E94 0000 		call PWM_duty_cycle_A16_set
GAS LISTING /tmp/ccTCrLhD.s 			page 11


 342 01b2 00C0      		rjmp .L33
 343               	.L15:
 129:isr.c         ****     if(data == 'n')
 344               		.stabn	68,0,129,.LM33-.LFBB2
 345               	.LM33:
 346 01b4 8E36      		cpi r24,lo8(110)
 347 01b6 01F4      		brne .L16
 131:isr.c         ****         if(speed<16)
 348               		.stabn	68,0,131,.LM34-.LFBB2
 349               	.LM34:
 350 01b8 8091 0000 		lds r24,speed
 351 01bc 9091 0000 		lds r25,(speed)+1
 352 01c0 8031      		cpi r24,16
 353 01c2 9105      		cpc r25,__zero_reg__
 354 01c4 00F4      		brsh .L20
 355 01c6 80E1      		ldi r24,lo8(16)
 356 01c8 90E0      		ldi r25,hi8(16)
 357               	.L20:
 134:isr.c         ****     speed = speed - 16;
 358               		.stabn	68,0,134,.LM35-.LFBB2
 359               	.LM35:
 360 01ca 4097      		sbiw r24,16
 361 01cc 9093 0000 		sts (speed)+1,r25
 362 01d0 8093 0000 		sts speed,r24
 363 01d4 00C0      		rjmp .L34
 364               	.L16:
 138:isr.c         ****     if(data == 'a')
 365               		.stabn	68,0,138,.LM36-.LFBB2
 366               	.LM36:
 367 01d6 8136      		cpi r24,lo8(97)
 368 01d8 01F4      		brne .L17
 140:isr.c         ****         count = 0;
 369               		.stabn	68,0,140,.LM37-.LFBB2
 370               	.LM37:
 371 01da 1092 0000 		sts count,__zero_reg__
 141:isr.c         ****         retning = 0;
 372               		.stabn	68,0,141,.LM38-.LFBB2
 373               	.LM38:
 374 01de 1092 0000 		sts retning,__zero_reg__
 142:isr.c         ****         PWM_duty_cycle_A_set(0);
 375               		.stabn	68,0,142,.LM39-.LFBB2
 376               	.LM39:
 377 01e2 80E0      		ldi r24,lo8(0)
 378 01e4 90E0      		ldi r25,hi8(0)
 379 01e6 0E94 0000 		call PWM_duty_cycle_A_set
 143:isr.c         **** 	    PWM_duty_cycle_B_set(0);
 380               		.stabn	68,0,143,.LM40-.LFBB2
 381               	.LM40:
 382 01ea 80E0      		ldi r24,lo8(0)
 383 01ec 90E0      		ldi r25,hi8(0)
 384 01ee 0E94 0000 		call PWM_duty_cycle_B_set
 385 01f2 00C0      		rjmp .L33
 386               	.L17:
 146:isr.c         ****     if(data == 'd')
 387               		.stabn	68,0,146,.LM41-.LFBB2
 388               	.LM41:
 389 01f4 8436      		cpi r24,lo8(100)
GAS LISTING /tmp/ccTCrLhD.s 			page 12


 390 01f6 01F4      		brne .L19
 148:isr.c         ****         count = 0;
 391               		.stabn	68,0,148,.LM42-.LFBB2
 392               	.LM42:
 393 01f8 1092 0000 		sts count,__zero_reg__
 149:isr.c         ****         retning = 1;
 394               		.stabn	68,0,149,.LM43-.LFBB2
 395               	.LM43:
 396 01fc 81E0      		ldi r24,lo8(1)
 397 01fe 8093 0000 		sts retning,r24
 150:isr.c         ****         PWM_duty_cycle_A_set(0);
 398               		.stabn	68,0,150,.LM44-.LFBB2
 399               	.LM44:
 400 0202 80E0      		ldi r24,lo8(0)
 401 0204 90E0      		ldi r25,hi8(0)
 402 0206 0E94 0000 		call PWM_duty_cycle_A_set
 151:isr.c         **** 	    PWM_duty_cycle_B_set(0);
 403               		.stabn	68,0,151,.LM45-.LFBB2
 404               	.LM45:
 405 020a 80E0      		ldi r24,lo8(0)
 406 020c 90E0      		ldi r25,hi8(0)
 407 020e 0E94 0000 		call PWM_duty_cycle_B_set
 408 0212 00C0      		rjmp .L33
 409               	.L19:
 154:isr.c         **** 	if(data == 'w')
 410               		.stabn	68,0,154,.LM46-.LFBB2
 411               	.LM46:
 412 0214 8737      		cpi r24,lo8(119)
 413 0216 01F4      		brne .L21
 156:isr.c         ****         if(count>=254)
 414               		.stabn	68,0,156,.LM47-.LFBB2
 415               	.LM47:
 416 0218 8091 0000 		lds r24,count
 417 021c 8E3F      		cpi r24,lo8(-2)
 418 021e 00F0      		brlo .L24
 419 0220 8EEF      		ldi r24,lo8(-2)
 420               	.L24:
 159:isr.c         ****         count++;
 421               		.stabn	68,0,159,.LM48-.LFBB2
 422               	.LM48:
 423 0222 982F      		mov r25,r24
 424 0224 9F5F      		subi r25,lo8(-(1))
 425 0226 9093 0000 		sts count,r25
 161:isr.c         ****         if(retning)
 426               		.stabn	68,0,161,.LM49-.LFBB2
 427               	.LM49:
 428 022a 8091 0000 		lds r24,retning
 429 022e 8823      		tst r24
 430 0230 01F0      		breq .L27
 431               	.L35:
 174:isr.c         **** 		    PWM_duty_cycle_A_set(count);
 432               		.stabn	68,0,174,.LM50-.LFBB2
 433               	.LM50:
 434 0232 892F      		mov r24,r25
 435 0234 90E0      		ldi r25,lo8(0)
 436 0236 0E94 0000 		call PWM_duty_cycle_A_set
 437 023a 00C0      		rjmp .L33
GAS LISTING /tmp/ccTCrLhD.s 			page 13


 438               	.L21:
 166:isr.c         **** 	if(data == 's')
 439               		.stabn	68,0,166,.LM51-.LFBB2
 440               	.LM51:
 441 023c 8337      		cpi r24,lo8(115)
 442 023e 01F0      		breq .L38
 178:isr.c         **** 	if(data == 'q')
 443               		.stabn	68,0,178,.LM52-.LFBB2
 444               	.LM52:
 445 0240 8137      		cpi r24,lo8(113)
 446 0242 01F0      		breq .L39
 190:isr.c         **** 	if(data == 'e')
 447               		.stabn	68,0,190,.LM53-.LFBB2
 448               	.LM53:
 449 0244 8536      		cpi r24,lo8(101)
 450 0246 01F0      		breq .+2
 451 0248 00C0      		rjmp .L33
 195:isr.c         ****         count = 0;
 452               		.stabn	68,0,195,.LM54-.LFBB2
 453               	.LM54:
 454 024a 1092 0000 		sts count,__zero_reg__
 197:isr.c         ****         if(retning)
 455               		.stabn	68,0,197,.LM55-.LFBB2
 456               	.LM55:
 457 024e 8091 0000 		lds r24,retning
 458 0252 8823      		tst r24
 459 0254 01F4      		brne .L40
 200:isr.c         ****             PWM_duty_cycle_B_set(count);
 460               		.stabn	68,0,200,.LM56-.LFBB2
 461               	.LM56:
 462 0256 80E0      		ldi r24,lo8(0)
 463 0258 90E0      		ldi r25,hi8(0)
 464 025a 0E94 0000 		call PWM_duty_cycle_B_set
 465 025e 00C0      		rjmp .L33
 466               	.L38:
 168:isr.c         ****         if(count<=1)
 467               		.stabn	68,0,168,.LM57-.LFBB2
 468               	.LM57:
 469 0260 8091 0000 		lds r24,count
 470 0264 8230      		cpi r24,lo8(2)
 471 0266 00F0      		brlo .L41
 472               	.L26:
 171:isr.c         ****         count--;
 473               		.stabn	68,0,171,.LM58-.LFBB2
 474               	.LM58:
 475 0268 982F      		mov r25,r24
 476 026a 9150      		subi r25,lo8(-(-1))
 477 026c 9093 0000 		sts count,r25
 173:isr.c         ****         if(retning)        
 478               		.stabn	68,0,173,.LM59-.LFBB2
 479               	.LM59:
 480 0270 8091 0000 		lds r24,retning
 481 0274 8823      		tst r24
 482 0276 01F4      		brne .L35
 483               	.L27:
 176:isr.c         ****             PWM_duty_cycle_B_set(count);
 484               		.stabn	68,0,176,.LM60-.LFBB2
GAS LISTING /tmp/ccTCrLhD.s 			page 14


 485               	.LM60:
 486 0278 892F      		mov r24,r25
 487 027a 90E0      		ldi r25,lo8(0)
 488 027c 0E94 0000 		call PWM_duty_cycle_B_set
 489 0280 00C0      		rjmp .L33
 490               	.L39:
 183:isr.c         ****         count = 255;
 491               		.stabn	68,0,183,.LM61-.LFBB2
 492               	.LM61:
 493 0282 8FEF      		ldi r24,lo8(-1)
 494 0284 8093 0000 		sts count,r24
 185:isr.c         ****         if(retning)
 495               		.stabn	68,0,185,.LM62-.LFBB2
 496               	.LM62:
 497 0288 8091 0000 		lds r24,retning
 498 028c 8823      		tst r24
 499 028e 01F0      		breq .L29
 186:isr.c         **** 		    PWM_duty_cycle_A_set(count);
 500               		.stabn	68,0,186,.LM63-.LFBB2
 501               	.LM63:
 502 0290 8FEF      		ldi r24,lo8(255)
 503 0292 90E0      		ldi r25,hi8(255)
 504 0294 0E94 0000 		call PWM_duty_cycle_A_set
 505 0298 00C0      		rjmp .L33
 506               	.L40:
 198:isr.c         **** 		    PWM_duty_cycle_A_set(count);
 507               		.stabn	68,0,198,.LM64-.LFBB2
 508               	.LM64:
 509 029a 80E0      		ldi r24,lo8(0)
 510 029c 90E0      		ldi r25,hi8(0)
 511 029e 0E94 0000 		call PWM_duty_cycle_A_set
 512 02a2 00C0      		rjmp .L33
 513               	.L29:
 188:isr.c         ****             PWM_duty_cycle_B_set(count);
 514               		.stabn	68,0,188,.LM65-.LFBB2
 515               	.LM65:
 516 02a4 8FEF      		ldi r24,lo8(255)
 517 02a6 90E0      		ldi r25,hi8(255)
 518 02a8 0E94 0000 		call PWM_duty_cycle_B_set
 519 02ac 00C0      		rjmp .L33
 520               	.L41:
 521 02ae 81E0      		ldi r24,lo8(1)
 522 02b0 00C0      		rjmp .L26
 523               		.size	__vector_20, .-__vector_20
 524               		.stabs	"data:r(0,2)",64,0,71,24
 525               		.stabn	192,0,0,.LFBB2-.LFBB2
 526               		.stabn	224,0,0,.Lscope2-.LFBB2
 527               	.Lscope2:
 528               		.stabs	"",36,0,0,.Lscope2-.LFBB2
 529               		.stabd	78,0,0
 530               		.stabs	"__vector_24:F(0,15)",36,0,44,__vector_24
 531               	.global	__vector_24
 532               		.type	__vector_24, @function
 533               	__vector_24:
 534               		.stabd	46,0,0
  44:isr.c         **** {
 535               		.stabn	68,0,44,.LM66-.LFBB3
GAS LISTING /tmp/ccTCrLhD.s 			page 15


 536               	.LM66:
 537               	.LFBB3:
 538 02b2 1F92      		push __zero_reg__
 539 02b4 0F92      		push r0
 540 02b6 0FB6      		in r0,__SREG__
 541 02b8 0F92      		push r0
 542 02ba 1124      		clr __zero_reg__
 543 02bc 2F93      		push r18
 544 02be 3F93      		push r19
 545 02c0 4F93      		push r20
 546 02c2 5F93      		push r21
 547 02c4 6F93      		push r22
 548 02c6 7F93      		push r23
 549 02c8 8F93      		push r24
 550 02ca 9F93      		push r25
 551 02cc AF93      		push r26
 552 02ce BF93      		push r27
 553 02d0 EF93      		push r30
 554 02d2 FF93      		push r31
 555               	/* prologue: Signal */
 556               	/* frame size = 0 */
  48:isr.c         **** 	channel = ADMUX & 0x07;
 557               		.stabn	68,0,48,.LM67-.LFBB3
 558               	.LM67:
 559 02d4 5091 7C00 		lds r21,124
  50:isr.c         ****     adlow=ADCL;
 560               		.stabn	68,0,50,.LM68-.LFBB3
 561               	.LM68:
 562 02d8 2091 7800 		lds r18,120
 563 02dc 30E0      		ldi r19,lo8(0)
 564 02de 3093 0000 		sts (adlow)+1,r19
 565 02e2 2093 0000 		sts adlow,r18
  51:isr.c         ****     adhigh=ADCH;
 566               		.stabn	68,0,51,.LM69-.LFBB3
 567               	.LM69:
 568 02e6 4091 7900 		lds r20,121
 569 02ea 4093 0000 		sts adhigh,r20
 570 02ee 1092 0000 		sts adhigh+1,__zero_reg__
  52:isr.c         **** 	ADCconv = (unsigned int)((adhigh<<8)|(adlow & 0xFF));	
 571               		.stabn	68,0,52,.LM70-.LFBB3
 572               	.LM70:
 573 02f2 942F      		mov r25,r20
 574 02f4 80E0      		ldi r24,lo8(0)
 575 02f6 822B      		or r24,r18
 576 02f8 932B      		or r25,r19
 577 02fa 9093 0000 		sts (ADCconv)+1,r25
 578 02fe 8093 0000 		sts ADCconv,r24
  61:isr.c         **** 	if(channel == 0)
 579               		.stabn	68,0,61,.LM71-.LFBB3
 580               	.LM71:
 581 0302 5770      		andi r21,lo8(7)
 582 0304 01F4      		brne .L44
  62:isr.c         **** 		presscontroller(ADCconv);
 583               		.stabn	68,0,62,.LM72-.LFBB3
 584               	.LM72:
 585 0306 0E94 0000 		call presscontroller
 586               	.L44:
GAS LISTING /tmp/ccTCrLhD.s 			page 16


 587               	/* epilogue start */
  66:isr.c         **** }
 588               		.stabn	68,0,66,.LM73-.LFBB3
 589               	.LM73:
 590 030a FF91      		pop r31
 591 030c EF91      		pop r30
 592 030e BF91      		pop r27
 593 0310 AF91      		pop r26
 594 0312 9F91      		pop r25
 595 0314 8F91      		pop r24
 596 0316 7F91      		pop r23
 597 0318 6F91      		pop r22
 598 031a 5F91      		pop r21
 599 031c 4F91      		pop r20
 600 031e 3F91      		pop r19
 601 0320 2F91      		pop r18
 602 0322 0F90      		pop r0
 603 0324 0FBE      		out __SREG__,r0
 604 0326 0F90      		pop r0
 605 0328 1F90      		pop __zero_reg__
 606 032a 1895      		reti
 607               		.size	__vector_24, .-__vector_24
 608               	.Lscope3:
 609               		.stabs	"",36,0,0,.Lscope3-.LFBB3
 610               		.stabd	78,0,0
 611               	.global	count
 612               	.global	count
 613               		.section .bss
 614               		.type	count, @object
 615               		.size	count, 1
 616               	count:
 617 0000 00        		.skip 1,0
 618               	.global	retning
 619               	.global	retning
 620               		.type	retning, @object
 621               		.size	retning, 1
 622               	retning:
 623 0001 00        		.skip 1,0
 624               	.global	speed
 625               	.global	speed
 626               		.type	speed, @object
 627               		.size	speed, 2
 628               	speed:
 629 0002 0000      		.skip 2,0
 630               	.global	adlow
 631               	.global	adlow
 632               		.type	adlow, @object
 633               		.size	adlow, 2
 634               	adlow:
 635 0004 0000      		.skip 2,0
 636               	.global	adhigh
 637               	.global	adhigh
 638               		.type	adhigh, @object
 639               		.size	adhigh, 2
 640               	adhigh:
 641 0006 0000      		.skip 2,0
 642               	.global	channel
GAS LISTING /tmp/ccTCrLhD.s 			page 17


 643               	.global	channel
 644               		.type	channel, @object
 645               		.size	channel, 1
 646               	channel:
 647 0008 00        		.skip 1,0
 648               		.stabs	"count:G(0,2)",32,0,17,0
 649               		.stabs	"retning:G(0,2)",32,0,18,0
 650               		.stabs	"speed:G(0,4)",32,0,19,0
 651               		.stabs	"adlow:G(0,4)",32,0,26,0
 652               		.stabs	"adhigh:G(0,4)",32,0,27,0
 653               		.stabs	"channel:G(0,2)",32,0,29,0
 654               		.text
 655               		.stabs	"",100,0,0,.Letext0
 656               	.Letext0:
GAS LISTING /tmp/ccTCrLhD.s 			page 18


DEFINED SYMBOLS
                            *ABS*:00000000 isr.c
     /tmp/ccTCrLhD.s:2      *ABS*:0000003f __SREG__
     /tmp/ccTCrLhD.s:3      *ABS*:0000003e __SP_H__
     /tmp/ccTCrLhD.s:4      *ABS*:0000003d __SP_L__
     /tmp/ccTCrLhD.s:5      *ABS*:00000034 __CCP__
     /tmp/ccTCrLhD.s:6      *ABS*:00000000 __tmp_reg__
     /tmp/ccTCrLhD.s:7      *ABS*:00000001 __zero_reg__
     /tmp/ccTCrLhD.s:83     .text:00000000 __vector_18
     /tmp/ccTCrLhD.s:646    .bss:00000008 channel
     /tmp/ccTCrLhD.s:140    .text:0000004c __vector_20
     /tmp/ccTCrLhD.s:628    .bss:00000002 speed
     /tmp/ccTCrLhD.s:616    .bss:00000000 count
     /tmp/ccTCrLhD.s:622    .bss:00000001 retning
     /tmp/ccTCrLhD.s:533    .text:000002b2 __vector_24
     /tmp/ccTCrLhD.s:634    .bss:00000004 adlow
     /tmp/ccTCrLhD.s:640    .bss:00000006 adhigh

UNDEFINED SYMBOLS
__do_copy_data
__do_clear_bss
ref
ki
__addsf3
__subsf3
kp
PWM_duty_cycle_A16_set
PWM_duty_cycle_A_set
PWM_duty_cycle_B_set
ADCconv
presscontroller
