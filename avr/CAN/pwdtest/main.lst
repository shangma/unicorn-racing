GAS LISTING /tmp/ccdifNlA.s 			page 1


   1               		.file	"main.c"
   2               	__SREG__ = 0x3f
   3               	__SP_H__ = 0x3e
   4               	__SP_L__ = 0x3d
   5               	__CCP__  = 0x34
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.global __do_copy_data
   9               		.global __do_clear_bss
  10               		.stabs	"/home/css/Documents/unicorn-racing/avr/CAN/pwdtest/",100,0,2,.Ltext0
  11               		.stabs	"main.c",100,0,2,.Ltext0
  12               		.text
  13               	.Ltext0:
  14               		.stabs	"gcc2_compiled.",60,0,0,0
  15               		.stabs	"int:t(0,1)=r(0,1);-32768;32767;",128,0,1,0
  16               		.stabs	"char:t(0,2)=@s8;r(0,2);0;255;",128,0,1,0
  17               		.stabs	"long int:t(0,3)=@s32;r(0,3);020000000000;017777777777;",128,0,1,0
  18               		.stabs	"unsigned int:t(0,4)=r(0,4);0;0177777;",128,0,1,0
  19               		.stabs	"long unsigned int:t(0,5)=@s32;r(0,5);0;037777777777;",128,0,1,0
  20               		.stabs	"long long int:t(0,6)=@s64;r(0,6);01000000000000000000000;0777777777777777777777;",128,0,1,
  21               		.stabs	"long long unsigned int:t(0,7)=@s64;r(0,7);0;01777777777777777777777;",128,0,1,0
  22               		.stabs	"short int:t(0,8)=r(0,8);-32768;32767;",128,0,1,0
  23               		.stabs	"short unsigned int:t(0,9)=r(0,9);0;0177777;",128,0,1,0
  24               		.stabs	"signed char:t(0,10)=@s8;r(0,10);-128;127;",128,0,1,0
  25               		.stabs	"unsigned char:t(0,11)=@s8;r(0,11);0;255;",128,0,1,0
  26               		.stabs	"float:t(0,12)=r(0,1);4;0;",128,0,1,0
  27               		.stabs	"double:t(0,13)=r(0,1);4;0;",128,0,1,0
  28               		.stabs	"long double:t(0,14)=r(0,1);4;0;",128,0,1,0
  29               		.stabs	"void:t(0,15)=(0,15)",128,0,1,0
  30               		.stabs	"/usr/lib/gcc/avr/4.3.4/../../../avr/include/avr/io.h",130,0,0,0
  31               		.stabs	"/usr/lib/gcc/avr/4.3.4/../../../avr/include/avr/sfr_defs.h",130,0,0,0
  32               		.stabs	"/usr/lib/gcc/avr/4.3.4/../../../avr/include/inttypes.h",130,0,0,0
  33               		.stabs	"/usr/lib/gcc/avr/4.3.4/../../../avr/include/stdint.h",130,0,0,0
  34               		.stabs	"int8_t:t(4,1)=(0,10)",128,0,121,0
  35               		.stabs	"uint8_t:t(4,2)=(0,11)",128,0,122,0
  36               		.stabs	"int16_t:t(4,3)=(0,1)",128,0,123,0
  37               		.stabs	"uint16_t:t(4,4)=(0,4)",128,0,124,0
  38               		.stabs	"int32_t:t(4,5)=(0,3)",128,0,125,0
  39               		.stabs	"uint32_t:t(4,6)=(0,5)",128,0,126,0
  40               		.stabs	"int64_t:t(4,7)=(0,6)",128,0,128,0
  41               		.stabs	"uint64_t:t(4,8)=(0,7)",128,0,129,0
  42               		.stabs	"intptr_t:t(4,9)=(4,3)",128,0,142,0
  43               		.stabs	"uintptr_t:t(4,10)=(4,4)",128,0,147,0
  44               		.stabs	"int_least8_t:t(4,11)=(4,1)",128,0,159,0
  45               		.stabs	"uint_least8_t:t(4,12)=(4,2)",128,0,164,0
  46               		.stabs	"int_least16_t:t(4,13)=(4,3)",128,0,169,0
  47               		.stabs	"uint_least16_t:t(4,14)=(4,4)",128,0,174,0
  48               		.stabs	"int_least32_t:t(4,15)=(4,5)",128,0,179,0
  49               		.stabs	"uint_least32_t:t(4,16)=(4,6)",128,0,184,0
  50               		.stabs	"int_least64_t:t(4,17)=(4,7)",128,0,192,0
  51               		.stabs	"uint_least64_t:t(4,18)=(4,8)",128,0,199,0
  52               		.stabs	"int_fast8_t:t(4,19)=(4,1)",128,0,213,0
  53               		.stabs	"uint_fast8_t:t(4,20)=(4,2)",128,0,218,0
  54               		.stabs	"int_fast16_t:t(4,21)=(4,3)",128,0,223,0
  55               		.stabs	"uint_fast16_t:t(4,22)=(4,4)",128,0,228,0
  56               		.stabs	"int_fast32_t:t(4,23)=(4,5)",128,0,233,0
  57               		.stabs	"uint_fast32_t:t(4,24)=(4,6)",128,0,238,0
GAS LISTING /tmp/ccdifNlA.s 			page 2


  58               		.stabs	"int_fast64_t:t(4,25)=(4,7)",128,0,246,0
  59               		.stabs	"uint_fast64_t:t(4,26)=(4,8)",128,0,253,0
  60               		.stabs	"intmax_t:t(4,27)=(4,7)",128,0,273,0
  61               		.stabs	"uintmax_t:t(4,28)=(4,8)",128,0,278,0
  62               		.stabn	162,0,0,0
  63               		.stabs	"int_farptr_t:t(3,1)=(4,5)",128,0,77,0
  64               		.stabs	"uint_farptr_t:t(3,2)=(4,6)",128,0,81,0
  65               		.stabn	162,0,0,0
  66               		.stabn	162,0,0,0
  67               		.stabs	"/usr/lib/gcc/avr/4.3.4/../../../avr/include/avr/fuse.h",130,0,0,0
  68               		.stabs	"__fuse_t:t(5,1)=(5,2)=s3low:(0,11),0,8;high:(0,11),8,8;extended:(0,11),16,8;;",128,0,239,0
  69               		.stabn	162,0,0,0
  70               		.stabn	162,0,0,0
  71               		.stabs	"/usr/lib/gcc/avr/4.3.4/../../../avr/include/stdlib.h",130,0,0,0
  72               		.stabs	"/usr/lib/gcc/avr/4.3.4/include/stddef.h",130,0,0,0
  73               		.stabs	"size_t:t(7,1)=(0,4)",128,0,214,0
  74               		.stabs	"wchar_t:t(7,2)=(0,1)",128,0,326,0
  75               		.stabn	162,0,0,0
  76               		.stabs	"div_t:t(6,1)=(6,2)=s4quot:(0,1),0,16;rem:(0,1),16,16;;",128,0,71,0
  77               		.stabs	"ldiv_t:t(6,3)=(6,4)=s8quot:(0,3),0,32;rem:(0,3),32,32;;",128,0,77,0
  78               		.stabs	"__compar_fn_t:t(6,5)=(6,6)=*(6,7)=f(0,1)",128,0,80,0
  79               		.stabn	162,0,0,0
  80               		.stabs	"uartinit:F(0,15)",36,0,26,uartinit
  81               	.global	uartinit
  82               		.type	uartinit, @function
  83               	uartinit:
  84               		.stabd	46,0,0
   0:main.c        **** /*************************************************
   1:main.c        **** * Timer
   2:main.c        **** *
   3:main.c        **** * Counter0  (8-bit): Timer til ADC konvertering
   4:main.c        **** * Counter1 (16-bit): Timer til Motor PWM
   5:main.c        **** * Counter2  (8-bit): Timer til ventil PWM
   6:main.c        **** *************************************************/
   7:main.c        **** 
   8:main.c        **** #include <config.h>
   9:main.c        **** #include <avr/io.h>
  10:main.c        **** #include <stdlib.h>
  11:main.c        **** #include <avr/interrupt.h>
  12:main.c        **** 
  13:main.c        **** #define F_CPU 18432000
  14:main.c        **** #include <util/delay.h>
  15:main.c        **** #define USART_BAUDRATE 230400
  16:main.c        **** #define BAUD_PRESCALE (((F_CPU / (USART_BAUDRATE * 16UL))) - 1) 
  17:main.c        **** 
  18:main.c        **** int p = 0;
  19:main.c        **** float i = 0.0;
  20:main.c        **** int ref = 60;
  21:main.c        **** unsigned int ADCconv = 0;
  22:main.c        **** float pressOld = 0; 
  23:main.c        **** 
  24:main.c        **** void uartinit(void)
  25:main.c        **** {
  85               		.stabn	68,0,26,.LM0-.LFBB1
  86               	.LM0:
  87               	.LFBB1:
  88               	/* prologue: function */
GAS LISTING /tmp/ccdifNlA.s 			page 3


  89               	/* frame size = 0 */
  26:main.c        **** 	//"Tænder" for TXen og RXen (send og modtag portene)
  27:main.c        **** 	UCSR0B = (1<<RXEN0)|(1<<TXEN0); 
  90               		.stabn	68,0,28,.LM1-.LFBB1
  91               	.LM1:
  92 0000 E1EC      		ldi r30,lo8(193)
  93 0002 F0E0      		ldi r31,hi8(193)
  94 0004 88E1      		ldi r24,lo8(24)
  95 0006 8083      		st Z,r24
  28:main.c        **** 	
  29:main.c        **** 	// Opsætning af format: 8data, 1 stop bit
  30:main.c        **** 	UCSR0C = (3<<UCSZ00);
  96               		.stabn	68,0,31,.LM2-.LFBB1
  97               	.LM2:
  98 0008 86E0      		ldi r24,lo8(6)
  99 000a 8093 C200 		sts 194,r24
  31:main.c        **** 
  32:main.c        **** 	// Opsætning af baud rate
  33:main.c        **** 	UBRR0L = BAUD_PRESCALE;
 100               		.stabn	68,0,34,.LM3-.LFBB1
 101               	.LM3:
 102 000e 84E0      		ldi r24,lo8(4)
 103 0010 8093 C400 		sts 196,r24
  34:main.c        **** 	UBRR0H = (BAUD_PRESCALE >> 8);
 104               		.stabn	68,0,35,.LM4-.LFBB1
 105               	.LM4:
 106 0014 1092 C500 		sts 197,__zero_reg__
  35:main.c        **** 	
  36:main.c        **** 	// Opsætning af Rx Uart interrupt (Receive Complete Interrupt) til indkommen seriel data
  37:main.c        **** 	UCSR0B|=(1<<RXCIE0);
 107               		.stabn	68,0,38,.LM5-.LFBB1
 108               	.LM5:
 109 0018 8081      		ld r24,Z
 110 001a 8068      		ori r24,lo8(-128)
 111 001c 8083      		st Z,r24
 112               	/* epilogue start */
  38:main.c        **** }
 113               		.stabn	68,0,39,.LM6-.LFBB1
 114               	.LM6:
 115 001e 0895      		ret
 116               		.size	uartinit, .-uartinit
 117               	.Lscope1:
 118               		.stabs	"",36,0,0,.Lscope1-.LFBB1
 119               		.stabd	78,0,0
 120               		.stabs	"PWM_duty_cycle_A_set:F(0,15)",36,0,42,PWM_duty_cycle_A_set
 121               	.global	PWM_duty_cycle_A_set
 122               		.type	PWM_duty_cycle_A_set, @function
 123               	PWM_duty_cycle_A_set:
 124               		.stabd	46,0,0
  39:main.c        **** 
  40:main.c        **** void PWM_duty_cycle_A_set(unsigned int x)
  41:main.c        **** {
 125               		.stabn	68,0,42,.LM7-.LFBB2
 126               	.LM7:
 127               	.LFBB2:
 128               	/* prologue: function */
 129               	/* frame size = 0 */
GAS LISTING /tmp/ccdifNlA.s 			page 4


  42:main.c        **** 	OCR2A = x; 
 130               		.stabn	68,0,43,.LM8-.LFBB2
 131               	.LM8:
 132 0020 8093 B300 		sts 179,r24
 133               	/* epilogue start */
  43:main.c        **** }
 134               		.stabn	68,0,44,.LM9-.LFBB2
 135               	.LM9:
 136 0024 0895      		ret
 137               		.size	PWM_duty_cycle_A_set, .-PWM_duty_cycle_A_set
 138               	.Lscope2:
 139               		.stabs	"",36,0,0,.Lscope2-.LFBB2
 140               		.stabd	78,0,0
 141               		.stabs	"PWM_duty_cycle_B_set:F(0,15)",36,0,47,PWM_duty_cycle_B_set
 142               	.global	PWM_duty_cycle_B_set
 143               		.type	PWM_duty_cycle_B_set, @function
 144               	PWM_duty_cycle_B_set:
 145               		.stabd	46,0,0
  44:main.c        **** 
  45:main.c        **** void PWM_duty_cycle_B_set(unsigned int x)
  46:main.c        **** {
 146               		.stabn	68,0,47,.LM10-.LFBB3
 147               	.LM10:
 148               	.LFBB3:
 149               	/* prologue: function */
 150               	/* frame size = 0 */
  47:main.c        **** 	OCR2B = x; 
 151               		.stabn	68,0,48,.LM11-.LFBB3
 152               	.LM11:
 153 0026 8093 B400 		sts 180,r24
 154               	/* epilogue start */
  48:main.c        **** }
 155               		.stabn	68,0,49,.LM12-.LFBB3
 156               	.LM12:
 157 002a 0895      		ret
 158               		.size	PWM_duty_cycle_B_set, .-PWM_duty_cycle_B_set
 159               	.Lscope3:
 160               		.stabs	"",36,0,0,.Lscope3-.LFBB3
 161               		.stabd	78,0,0
 162               		.stabs	"PWM_duty_cycle_A16_set:F(0,15)",36,0,52,PWM_duty_cycle_A16_set
 163               	.global	PWM_duty_cycle_A16_set
 164               		.type	PWM_duty_cycle_A16_set, @function
 165               	PWM_duty_cycle_A16_set:
 166               		.stabd	46,0,0
  49:main.c        **** 
  50:main.c        **** void PWM_duty_cycle_A16_set(unsigned int x)
  51:main.c        **** {
 167               		.stabn	68,0,52,.LM13-.LFBB4
 168               	.LM13:
 169               	.LFBB4:
 170               	/* prologue: function */
 171               	/* frame size = 0 */
  52:main.c        **** 	OCR1AH = (0xFF) & (x>>8);
 172               		.stabn	68,0,53,.LM14-.LFBB4
 173               	.LM14:
 174 002c 9093 8900 		sts 137,r25
  53:main.c        **** 	OCR1AL = (0xFF) & (x); 
GAS LISTING /tmp/ccdifNlA.s 			page 5


 175               		.stabn	68,0,54,.LM15-.LFBB4
 176               	.LM15:
 177 0030 8093 8800 		sts 136,r24
 178               	/* epilogue start */
  54:main.c        **** }
 179               		.stabn	68,0,55,.LM16-.LFBB4
 180               	.LM16:
 181 0034 0895      		ret
 182               		.size	PWM_duty_cycle_A16_set, .-PWM_duty_cycle_A16_set
 183               	.Lscope4:
 184               		.stabs	"",36,0,0,.Lscope4-.LFBB4
 185               		.stabd	78,0,0
 186               		.stabs	"pwm8Init:F(0,15)",36,0,58,pwm8Init
 187               	.global	pwm8Init
 188               		.type	pwm8Init, @function
 189               	pwm8Init:
 190               		.stabd	46,0,0
  55:main.c        **** 
  56:main.c        **** void pwm8Init(void)
  57:main.c        **** {
 191               		.stabn	68,0,58,.LM17-.LFBB5
 192               	.LM17:
 193               	.LFBB5:
 194               	/* prologue: function */
 195               	/* frame size = 0 */
  58:main.c        **** 	//PWM, 8 bit counter (counter0)
  59:main.c        **** 	// (OC2A) Output
  60:main.c        ****     DDRD|= (1<<PD6);  
 196               		.stabn	68,0,61,.LM18-.LFBB5
 197               	.LM18:
 198 0036 569A      		sbi 42-32,6
  61:main.c        **** 	// (OC2B) Output
  62:main.c        **** 	DDRD|= (1<<PD7);      
 199               		.stabn	68,0,63,.LM19-.LFBB5
 200               	.LM19:
 201 0038 579A      		sbi 42-32,7
  63:main.c        **** 
  64:main.c        **** 	// Opsætning af compare match.
  65:main.c        **** 	TCCR2A |=(1<<COM2A1);
 202               		.stabn	68,0,66,.LM20-.LFBB5
 203               	.LM20:
 204 003a E0EB      		ldi r30,lo8(176)
 205 003c F0E0      		ldi r31,hi8(176)
 206 003e 8081      		ld r24,Z
 207 0040 8068      		ori r24,lo8(-128)
 208 0042 8083      		st Z,r24
  66:main.c        **** 	TCCR2A &=~(1<<COM2A0);
 209               		.stabn	68,0,67,.LM21-.LFBB5
 210               	.LM21:
 211 0044 8081      		ld r24,Z
 212 0046 8F7B      		andi r24,lo8(-65)
 213 0048 8083      		st Z,r24
  67:main.c        **** 
  68:main.c        **** 	TCCR2A |=(1<<COM2B1);
 214               		.stabn	68,0,69,.LM22-.LFBB5
 215               	.LM22:
 216 004a 8081      		ld r24,Z
GAS LISTING /tmp/ccdifNlA.s 			page 6


 217 004c 8062      		ori r24,lo8(32)
 218 004e 8083      		st Z,r24
  69:main.c        **** 	TCCR2A &=~(1<<COM2B0);
 219               		.stabn	68,0,70,.LM23-.LFBB5
 220               	.LM23:
 221 0050 8081      		ld r24,Z
 222 0052 8F7E      		andi r24,lo8(-17)
 223 0054 8083      		st Z,r24
  70:main.c        **** 
  71:main.c        **** 	// FAST-PWM
  72:main.c        **** 	TCCR2A |=(1<<WGM20);
 224               		.stabn	68,0,73,.LM24-.LFBB5
 225               	.LM24:
 226 0056 8081      		ld r24,Z
 227 0058 8160      		ori r24,lo8(1)
 228 005a 8083      		st Z,r24
  73:main.c        **** 	TCCR2A |=(1<<WGM21);
 229               		.stabn	68,0,74,.LM25-.LFBB5
 230               	.LM25:
 231 005c 8081      		ld r24,Z
 232 005e 8260      		ori r24,lo8(2)
 233 0060 8083      		st Z,r24
  74:main.c        **** 
  75:main.c        **** 	// Prescaler, 1
  76:main.c        ****     TCCR2B |=(1<<CS20);
 234               		.stabn	68,0,77,.LM26-.LFBB5
 235               	.LM26:
 236 0062 E1EB      		ldi r30,lo8(177)
 237 0064 F0E0      		ldi r31,hi8(177)
 238 0066 8081      		ld r24,Z
 239 0068 8160      		ori r24,lo8(1)
 240 006a 8083      		st Z,r24
 241               	.LBB12:
 242               	.LBB13:
  43:main.c        **** 	OCR2A = x; 
 243               		.stabn	68,0,43,.LM27-.LFBB5
 244               	.LM27:
 245 006c 1092 B300 		sts 179,__zero_reg__
 246               	.LBE13:
 247               	.LBE12:
 248               	.LBB14:
 249               	.LBB15:
  48:main.c        **** 	OCR2B = x; 
 250               		.stabn	68,0,48,.LM28-.LFBB5
 251               	.LM28:
 252 0070 1092 B400 		sts 180,__zero_reg__
 253               	/* epilogue start */
 254               	.LBE15:
 255               	.LBE14:
  77:main.c        **** 
  78:main.c        **** 	PWM_duty_cycle_A_set(0);
  79:main.c        **** 	PWM_duty_cycle_B_set(0);
  80:main.c        **** }
 256               		.stabn	68,0,81,.LM29-.LFBB5
 257               	.LM29:
 258 0074 0895      		ret
 259               		.size	pwm8Init, .-pwm8Init
GAS LISTING /tmp/ccdifNlA.s 			page 7


 260               	.Lscope5:
 261               		.stabs	"",36,0,0,.Lscope5-.LFBB5
 262               		.stabd	78,0,0
 263               		.stabs	"pwm16Init:F(0,15)",36,0,84,pwm16Init
 264               	.global	pwm16Init
 265               		.type	pwm16Init, @function
 266               	pwm16Init:
 267               		.stabd	46,0,0
  81:main.c        **** 
  82:main.c        **** void pwm16Init(void)
  83:main.c        **** {
 268               		.stabn	68,0,84,.LM30-.LFBB6
 269               	.LM30:
 270               	.LFBB6:
 271               	/* prologue: function */
 272               	/* frame size = 0 */
  84:main.c        **** 	//PWM, 16 bit counter (counter1)
  85:main.c        **** 	// (OC1A) Output
  86:main.c        ****     DDRD|= (1<<PD4);  
 273               		.stabn	68,0,87,.LM31-.LFBB6
 274               	.LM31:
 275 0076 549A      		sbi 42-32,4
  87:main.c        ****     DDRD|= (1<<PD5);  
 276               		.stabn	68,0,88,.LM32-.LFBB6
 277               	.LM32:
 278 0078 559A      		sbi 42-32,5
  88:main.c        ****      
  89:main.c        **** 	// Opsætning af compare match.
  90:main.c        **** 	TCCR1A |=(1<<COM1A1);
 279               		.stabn	68,0,91,.LM33-.LFBB6
 280               	.LM33:
 281 007a E0E8      		ldi r30,lo8(128)
 282 007c F0E0      		ldi r31,hi8(128)
 283 007e 8081      		ld r24,Z
 284 0080 8068      		ori r24,lo8(-128)
 285 0082 8083      		st Z,r24
  91:main.c        **** 	TCCR1A |=(1<<COM1A0);
 286               		.stabn	68,0,92,.LM34-.LFBB6
 287               	.LM34:
 288 0084 8081      		ld r24,Z
 289 0086 8064      		ori r24,lo8(64)
 290 0088 8083      		st Z,r24
  92:main.c        **** 
  93:main.c        **** 	// FAST-PWM TOP = ICRn
  94:main.c        **** 	TCCR1A &=~(1<<WGM10);
 291               		.stabn	68,0,95,.LM35-.LFBB6
 292               	.LM35:
 293 008a 8081      		ld r24,Z
 294 008c 8E7F      		andi r24,lo8(-2)
 295 008e 8083      		st Z,r24
  95:main.c        **** 	TCCR1A |=(1<<WGM11);
 296               		.stabn	68,0,96,.LM36-.LFBB6
 297               	.LM36:
 298 0090 8081      		ld r24,Z
 299 0092 8260      		ori r24,lo8(2)
 300 0094 8083      		st Z,r24
  96:main.c        **** 	TCCR1B |=(1<<WGM12);
GAS LISTING /tmp/ccdifNlA.s 			page 8


 301               		.stabn	68,0,97,.LM37-.LFBB6
 302               	.LM37:
 303 0096 E1E8      		ldi r30,lo8(129)
 304 0098 F0E0      		ldi r31,hi8(129)
 305 009a 8081      		ld r24,Z
 306 009c 8860      		ori r24,lo8(8)
 307 009e 8083      		st Z,r24
  97:main.c        **** 	TCCR1B |=(1<<WGM13);
 308               		.stabn	68,0,98,.LM38-.LFBB6
 309               	.LM38:
 310 00a0 8081      		ld r24,Z
 311 00a2 8061      		ori r24,lo8(16)
 312 00a4 8083      		st Z,r24
  98:main.c        **** 
  99:main.c        **** 	//Top (10-bit)
 100:main.c        **** 	ICR1H = 0x00;
 313               		.stabn	68,0,101,.LM39-.LFBB6
 314               	.LM39:
 315 00a6 1092 8700 		sts 135,__zero_reg__
 101:main.c        **** 	ICR1L = 0xFF;
 316               		.stabn	68,0,102,.LM40-.LFBB6
 317               	.LM40:
 318 00aa 8FEF      		ldi r24,lo8(-1)
 319 00ac 8093 8600 		sts 134,r24
 102:main.c        **** 
 103:main.c        **** 	// Prescaler, 64
 104:main.c        ****     TCCR1B &=~(1<<CS10);
 320               		.stabn	68,0,105,.LM41-.LFBB6
 321               	.LM41:
 322 00b0 8081      		ld r24,Z
 323 00b2 8E7F      		andi r24,lo8(-2)
 324 00b4 8083      		st Z,r24
 105:main.c        **** 	TCCR1B |=(1<<CS11); 
 325               		.stabn	68,0,106,.LM42-.LFBB6
 326               	.LM42:
 327 00b6 8081      		ld r24,Z
 328 00b8 8260      		ori r24,lo8(2)
 329 00ba 8083      		st Z,r24
 106:main.c        **** 	TCCR1B &=~(1<<CS12); 
 330               		.stabn	68,0,107,.LM43-.LFBB6
 331               	.LM43:
 332 00bc 8081      		ld r24,Z
 333 00be 8B7F      		andi r24,lo8(-5)
 334 00c0 8083      		st Z,r24
 335               	.LBB16:
 336               	.LBB17:
  53:main.c        **** 	OCR1AH = (0xFF) & (x>>8);
 337               		.stabn	68,0,53,.LM44-.LFBB6
 338               	.LM44:
 339 00c2 1092 8900 		sts 137,__zero_reg__
  54:main.c        **** 	OCR1AL = (0xFF) & (x); 
 340               		.stabn	68,0,54,.LM45-.LFBB6
 341               	.LM45:
 342 00c6 1092 8800 		sts 136,__zero_reg__
 343               	/* epilogue start */
 344               	.LBE17:
 345               	.LBE16:
GAS LISTING /tmp/ccdifNlA.s 			page 9


 107:main.c        **** 
 108:main.c        **** 	// Compare match værdi
 109:main.c        **** 	PWM_duty_cycle_A16_set(0);
 110:main.c        **** }
 346               		.stabn	68,0,111,.LM46-.LFBB6
 347               	.LM46:
 348 00ca 0895      		ret
 349               		.size	pwm16Init, .-pwm16Init
 350               	.Lscope6:
 351               		.stabs	"",36,0,0,.Lscope6-.LFBB6
 352               		.stabd	78,0,0
 353               		.stabs	"counter0Init:F(0,15)",36,0,114,counter0Init
 354               	.global	counter0Init
 355               		.type	counter0Init, @function
 356               	counter0Init:
 357               		.stabd	46,0,0
 111:main.c        **** 
 112:main.c        **** void counter0Init(void)
 113:main.c        **** {
 358               		.stabn	68,0,114,.LM47-.LFBB7
 359               	.LM47:
 360               	.LFBB7:
 361               	/* prologue: function */
 362               	/* frame size = 0 */
 114:main.c        **** 	//TCCR0B |=(1<<CS00);
 115:main.c        **** 	//TCCR0B &=~(1<<CS01);
 116:main.c        **** 	//TCCR0B |=(1<<CS02);
 117:main.c        **** 
 118:main.c        **** 	TCCR0B |= counter0prescale256;
 363               		.stabn	68,0,119,.LM48-.LFBB7
 364               	.LM48:
 365 00cc 85B5      		in r24,69-32
 366 00ce 8460      		ori r24,lo8(4)
 367 00d0 85BD      		out 69-32,r24
 119:main.c        **** 
 120:main.c        **** 	TIMSK0 |=(1<<TOIE0);
 368               		.stabn	68,0,121,.LM49-.LFBB7
 369               	.LM49:
 370 00d2 EEE6      		ldi r30,lo8(110)
 371 00d4 F0E0      		ldi r31,hi8(110)
 372 00d6 8081      		ld r24,Z
 373 00d8 8160      		ori r24,lo8(1)
 374 00da 8083      		st Z,r24
 375               	/* epilogue start */
 121:main.c        **** }
 376               		.stabn	68,0,122,.LM50-.LFBB7
 377               	.LM50:
 378 00dc 0895      		ret
 379               		.size	counter0Init, .-counter0Init
 380               	.Lscope7:
 381               		.stabs	"",36,0,0,.Lscope7-.LFBB7
 382               		.stabd	78,0,0
 383               		.stabs	"sendtekst:F(0,15)",36,0,125,sendtekst
 384               		.stabs	"tekstarray:P(0,16)=*(0,2)",64,0,124,30
 385               	.global	sendtekst
 386               		.type	sendtekst, @function
 387               	sendtekst:
GAS LISTING /tmp/ccdifNlA.s 			page 10


 388               		.stabd	46,0,0
 122:main.c        **** 
 123:main.c        **** void sendtekst(char *tekstarray)
 124:main.c        **** {
 389               		.stabn	68,0,125,.LM51-.LFBB8
 390               	.LM51:
 391               	.LFBB8:
 392               	/* prologue: function */
 393               	/* frame size = 0 */
 394 00de FC01      		movw r30,r24
 125:main.c        **** 	// Tæller
 126:main.c        **** 	short int i;
 127:main.c        **** 
 128:main.c        **** 	// Sender en byte af gangen
 129:main.c        **** 	for (i = 0; tekstarray[i] != '\0'; i++)
 395               		.stabn	68,0,130,.LM52-.LFBB8
 396               	.LM52:
 397 00e0 9081      		ld r25,Z
 398 00e2 9923      		tst r25
 399 00e4 01F0      		breq .L18
 400               	.L21:
 130:main.c        **** 	{	
 131:main.c        **** 		while ((UCSR0A & (1 << UDRE0)) == 0) {};	// Venter indtil UDR0 er klar til ny data
 401               		.stabn	68,0,132,.LM53-.LFBB8
 402               	.LM53:
 403 00e6 8091 C000 		lds r24,192
 404 00ea 85FF      		sbrs r24,5
 405 00ec 00C0      		rjmp .L21
 132:main.c        **** 		UDR0 = tekstarray[i]; 						// Data lægges i buffer (UDR0) og sendes via TXen
 406               		.stabn	68,0,133,.LM54-.LFBB8
 407               	.LM54:
 408 00ee 9093 C600 		sts 198,r25
 130:main.c        **** 	{	
 409               		.stabn	68,0,130,.LM55-.LFBB8
 410               	.LM55:
 411 00f2 9181      		ldd r25,Z+1
 412 00f4 3196      		adiw r30,1
 413 00f6 9923      		tst r25
 414 00f8 01F4      		brne .L21
 415               	.L18:
 416 00fa 0895      		ret
 417               		.size	sendtekst, .-sendtekst
 418               	.Lscope8:
 419               		.stabs	"",36,0,0,.Lscope8-.LFBB8
 420               		.stabd	78,0,0
 421               		.stabs	"adcInit:F(0,15)",36,0,138,adcInit
 422               	.global	adcInit
 423               		.type	adcInit, @function
 424               	adcInit:
 425               		.stabd	46,0,0
 133:main.c        **** 	}
 134:main.c        **** }
 135:main.c        **** 
 136:main.c        **** void adcInit(unsigned int channel)
 137:main.c        **** {
 426               		.stabn	68,0,138,.LM56-.LFBB9
 427               	.LM56:
GAS LISTING /tmp/ccdifNlA.s 			page 11


 428               	.LFBB9:
 429               	/* prologue: function */
 430               	/* frame size = 0 */
 138:main.c        **** 	// ADC channel
 139:main.c        **** 	ADMUX=(channel & 0x0f);
 431               		.stabn	68,0,140,.LM57-.LFBB9
 432               	.LM57:
 433 00fc 8F70      		andi r24,lo8(15)
 434 00fe ECE7      		ldi r30,lo8(124)
 435 0100 F0E0      		ldi r31,hi8(124)
 436 0102 8083      		st Z,r24
 140:main.c        **** 
 141:main.c        **** 	// Vref config
 142:main.c        **** 	ADMUX |=(1<<REFS0); 
 437               		.stabn	68,0,143,.LM58-.LFBB9
 438               	.LM58:
 439 0104 8081      		ld r24,Z
 440 0106 8064      		ori r24,lo8(64)
 441 0108 8083      		st Z,r24
 143:main.c        **** 	ADMUX &=~(1<<REFS1);
 442               		.stabn	68,0,144,.LM59-.LFBB9
 443               	.LM59:
 444 010a 8081      		ld r24,Z
 445 010c 8F77      		andi r24,lo8(127)
 446 010e 8083      		st Z,r24
 144:main.c        **** 
 145:main.c        **** 	// ADC ENABLE
 146:main.c        **** 	ADCSRA |=(1<<ADEN); 
 447               		.stabn	68,0,147,.LM60-.LFBB9
 448               	.LM60:
 449 0110 EAE7      		ldi r30,lo8(122)
 450 0112 F0E0      		ldi r31,hi8(122)
 451 0114 8081      		ld r24,Z
 452 0116 8068      		ori r24,lo8(-128)
 453 0118 8083      		st Z,r24
 147:main.c        **** 
 148:main.c        **** 	// ADC frequency prescaler
 149:main.c        **** 	ADCSRA |=(1<<ADPS0);
 454               		.stabn	68,0,150,.LM61-.LFBB9
 455               	.LM61:
 456 011a 8081      		ld r24,Z
 457 011c 8160      		ori r24,lo8(1)
 458 011e 8083      		st Z,r24
 150:main.c        **** 	ADCSRA &=~(1<<ADPS1);
 459               		.stabn	68,0,151,.LM62-.LFBB9
 460               	.LM62:
 461 0120 8081      		ld r24,Z
 462 0122 8D7F      		andi r24,lo8(-3)
 463 0124 8083      		st Z,r24
 151:main.c        **** 	ADCSRA |=(1<<ADPS2);
 464               		.stabn	68,0,152,.LM63-.LFBB9
 465               	.LM63:
 466 0126 8081      		ld r24,Z
 467 0128 8460      		ori r24,lo8(4)
 468 012a 8083      		st Z,r24
 152:main.c        **** 
 153:main.c        **** 	// ADC Tigger mode
GAS LISTING /tmp/ccdifNlA.s 			page 12


 154:main.c        **** 	/*
 155:main.c        **** 	ADCSRA |=(1<<ADATE); 
 156:main.c        **** 
 157:main.c        **** 	// ADC trigger source
 158:main.c        **** 	ADCSRB &=~(1<<ADTS0); 
 159:main.c        **** 	ADCSRB &=~(1<<ADTS1);
 160:main.c        **** 	ADCSRB |=(1<<ADTS2);
 161:main.c        **** 	*/
 162:main.c        **** 	// ADC interrupt enable
 163:main.c        **** 	ADCSRA |=(1<<ADIE);
 469               		.stabn	68,0,164,.LM64-.LFBB9
 470               	.LM64:
 471 012c 8081      		ld r24,Z
 472 012e 8860      		ori r24,lo8(8)
 473 0130 8083      		st Z,r24
 474               	/* epilogue start */
 164:main.c        **** }
 475               		.stabn	68,0,165,.LM65-.LFBB9
 476               	.LM65:
 477 0132 0895      		ret
 478               		.size	adcInit, .-adcInit
 479               	.Lscope9:
 480               		.stabs	"",36,0,0,.Lscope9-.LFBB9
 481               		.stabd	78,0,0
 482               		.stabs	"adcStop:F(0,15)",36,0,168,adcStop
 483               	.global	adcStop
 484               		.type	adcStop, @function
 485               	adcStop:
 486               		.stabd	46,0,0
 165:main.c        **** 
 166:main.c        **** void adcStop(void)
 167:main.c        **** {
 487               		.stabn	68,0,168,.LM66-.LFBB10
 488               	.LM66:
 489               	.LFBB10:
 490               	/* prologue: function */
 491               	/* frame size = 0 */
 168:main.c        **** 	ADCSRA &=~(1<<ADEN); // ADC prescaler disable
 492               		.stabn	68,0,169,.LM67-.LFBB10
 493               	.LM67:
 494 0134 EAE7      		ldi r30,lo8(122)
 495 0136 F0E0      		ldi r31,hi8(122)
 496 0138 8081      		ld r24,Z
 497 013a 8F77      		andi r24,lo8(127)
 498 013c 8083      		st Z,r24
 499               	/* epilogue start */
 169:main.c        **** }
 500               		.stabn	68,0,170,.LM68-.LFBB10
 501               	.LM68:
 502 013e 0895      		ret
 503               		.size	adcStop, .-adcStop
 504               	.Lscope10:
 505               		.stabs	"",36,0,0,.Lscope10-.LFBB10
 506               		.stabd	78,0,0
 507               		.stabs	"main:F(0,1)",36,0,173,main
 508               	.global	main
 509               		.type	main, @function
GAS LISTING /tmp/ccdifNlA.s 			page 13


 510               	main:
 511               		.stabd	46,0,0
 170:main.c        **** 
 171:main.c        **** int main(void)
 172:main.c        **** {
 512               		.stabn	68,0,173,.LM69-.LFBB11
 513               	.LM69:
 514               	.LFBB11:
 515               	/* prologue: function */
 516               	/* frame size = 0 */
 517               	.LBB24:
 518               	.LBB25:
  28:main.c        **** 	UCSR0B = (1<<RXEN0)|(1<<TXEN0); 
 519               		.stabn	68,0,28,.LM70-.LFBB11
 520               	.LM70:
 521 0140 88E1      		ldi r24,lo8(24)
 522 0142 8093 C100 		sts 193,r24
  31:main.c        **** 	UCSR0C = (3<<UCSZ00);
 523               		.stabn	68,0,31,.LM71-.LFBB11
 524               	.LM71:
 525 0146 86E0      		ldi r24,lo8(6)
 526 0148 8093 C200 		sts 194,r24
  34:main.c        **** 	UBRR0L = BAUD_PRESCALE;
 527               		.stabn	68,0,34,.LM72-.LFBB11
 528               	.LM72:
 529 014c 84E0      		ldi r24,lo8(4)
 530 014e 8093 C400 		sts 196,r24
  35:main.c        **** 	UBRR0H = (BAUD_PRESCALE >> 8);
 531               		.stabn	68,0,35,.LM73-.LFBB11
 532               	.LM73:
 533 0152 1092 C500 		sts 197,__zero_reg__
  38:main.c        **** 	UCSR0B|=(1<<RXCIE0);
 534               		.stabn	68,0,38,.LM74-.LFBB11
 535               	.LM74:
 536 0156 8091 C100 		lds r24,193
 537 015a 8068      		ori r24,lo8(-128)
 538 015c 8093 C100 		sts 193,r24
 539               	.LBE25:
 540               	.LBE24:
 541               	.LBB26:
 542               	.LBB27:
 140:main.c        **** 	ADMUX=(channel & 0x0f);
 543               		.stabn	68,0,140,.LM75-.LFBB11
 544               	.LM75:
 545 0160 1092 7C00 		sts 124,__zero_reg__
 143:main.c        **** 	ADMUX |=(1<<REFS0); 
 546               		.stabn	68,0,143,.LM76-.LFBB11
 547               	.LM76:
 548 0164 8091 7C00 		lds r24,124
 549 0168 8064      		ori r24,lo8(64)
 550 016a 8093 7C00 		sts 124,r24
 144:main.c        **** 	ADMUX &=~(1<<REFS1);
 551               		.stabn	68,0,144,.LM77-.LFBB11
 552               	.LM77:
 553 016e 8091 7C00 		lds r24,124
 554 0172 8F77      		andi r24,lo8(127)
 555 0174 8093 7C00 		sts 124,r24
GAS LISTING /tmp/ccdifNlA.s 			page 14


 147:main.c        **** 	ADCSRA |=(1<<ADEN); 
 556               		.stabn	68,0,147,.LM78-.LFBB11
 557               	.LM78:
 558 0178 8091 7A00 		lds r24,122
 559 017c 8068      		ori r24,lo8(-128)
 560 017e 8093 7A00 		sts 122,r24
 150:main.c        **** 	ADCSRA |=(1<<ADPS0);
 561               		.stabn	68,0,150,.LM79-.LFBB11
 562               	.LM79:
 563 0182 8091 7A00 		lds r24,122
 564 0186 8160      		ori r24,lo8(1)
 565 0188 8093 7A00 		sts 122,r24
 151:main.c        **** 	ADCSRA &=~(1<<ADPS1);
 566               		.stabn	68,0,151,.LM80-.LFBB11
 567               	.LM80:
 568 018c 8091 7A00 		lds r24,122
 569 0190 8D7F      		andi r24,lo8(-3)
 570 0192 8093 7A00 		sts 122,r24
 152:main.c        **** 	ADCSRA |=(1<<ADPS2);
 571               		.stabn	68,0,152,.LM81-.LFBB11
 572               	.LM81:
 573 0196 8091 7A00 		lds r24,122
 574 019a 8460      		ori r24,lo8(4)
 575 019c 8093 7A00 		sts 122,r24
 164:main.c        **** 	ADCSRA |=(1<<ADIE);
 576               		.stabn	68,0,164,.LM82-.LFBB11
 577               	.LM82:
 578 01a0 8091 7A00 		lds r24,122
 579 01a4 8860      		ori r24,lo8(8)
 580 01a6 8093 7A00 		sts 122,r24
 581               	.LBE27:
 582               	.LBE26:
 583               	.LBB28:
 584               	.LBB29:
 119:main.c        **** 	TCCR0B |= counter0prescale256;
 585               		.stabn	68,0,119,.LM83-.LFBB11
 586               	.LM83:
 587 01aa 85B5      		in r24,69-32
 588 01ac 8460      		ori r24,lo8(4)
 589 01ae 85BD      		out 69-32,r24
 121:main.c        **** 	TIMSK0 |=(1<<TOIE0);
 590               		.stabn	68,0,121,.LM84-.LFBB11
 591               	.LM84:
 592 01b0 8091 6E00 		lds r24,110
 593 01b4 8160      		ori r24,lo8(1)
 594 01b6 8093 6E00 		sts 110,r24
 595               	.LBE29:
 596               	.LBE28:
 173:main.c        ****     uartinit();
 174:main.c        ****     //pwm8Init();
 175:main.c        ****     //pwm16Init();
 176:main.c        **** 	adcInit(0);
 177:main.c        **** 	counter0Init();
 178:main.c        **** 	
 179:main.c        ****     sei();
 597               		.stabn	68,0,180,.LM85-.LFBB11
 598               	.LM85:
GAS LISTING /tmp/ccdifNlA.s 			page 15


 599               	/* #APP */
 600               	 ;  180 "main.c" 1
 601 01ba 7894      		sei
 602               	 ;  0 "" 2
 603               	/* #NOAPP */
 604               	.L28:
 605 01bc 00C0      		rjmp .L28
 606               		.size	main, .-main
 607               	.Lscope11:
 608               		.stabs	"",36,0,0,.Lscope11-.LFBB11
 609               		.stabd	78,0,0
 610               	.global	p
 611               	.global	p
 612               		.section .bss
 613               		.type	p, @object
 614               		.size	p, 2
 615               	p:
 616 0000 0000      		.skip 2,0
 617               	.global	i
 618               	.global	i
 619               		.type	i, @object
 620               		.size	i, 4
 621               	i:
 622 0002 0000 0000 		.skip 4,0
 623               	.global	ref
 624               		.data
 625               		.type	ref, @object
 626               		.size	ref, 2
 627               	ref:
 628 0000 3C00      		.word	60
 629               	.global	ADCconv
 630               	.global	ADCconv
 631               		.section .bss
 632               		.type	ADCconv, @object
 633               		.size	ADCconv, 2
 634               	ADCconv:
 635 0006 0000      		.skip 2,0
 636               	.global	pressOld
 637               	.global	pressOld
 638               		.type	pressOld, @object
 639               		.size	pressOld, 4
 640               	pressOld:
 641 0008 0000 0000 		.skip 4,0
 642               		.stabs	"p:G(0,1)",32,0,19,0
 643               		.stabs	"i:G(0,12)",32,0,20,0
 644               		.stabs	"ref:G(0,1)",32,0,21,0
 645               		.stabs	"ADCconv:G(0,4)",32,0,22,0
 646               		.stabs	"pressOld:G(0,12)",32,0,23,0
 647               		.text
 648               		.stabs	"",100,0,0,.Letext0
 649               	.Letext0:
GAS LISTING /tmp/ccdifNlA.s 			page 16


DEFINED SYMBOLS
                            *ABS*:0000000000000000 main.c
     /tmp/ccdifNlA.s:2      *ABS*:000000000000003f __SREG__
     /tmp/ccdifNlA.s:3      *ABS*:000000000000003e __SP_H__
     /tmp/ccdifNlA.s:4      *ABS*:000000000000003d __SP_L__
     /tmp/ccdifNlA.s:5      *ABS*:0000000000000034 __CCP__
     /tmp/ccdifNlA.s:6      *ABS*:0000000000000000 __tmp_reg__
     /tmp/ccdifNlA.s:7      *ABS*:0000000000000001 __zero_reg__
     /tmp/ccdifNlA.s:83     .text:0000000000000000 uartinit
     /tmp/ccdifNlA.s:123    .text:0000000000000020 PWM_duty_cycle_A_set
     /tmp/ccdifNlA.s:144    .text:0000000000000026 PWM_duty_cycle_B_set
     /tmp/ccdifNlA.s:165    .text:000000000000002c PWM_duty_cycle_A16_set
     /tmp/ccdifNlA.s:189    .text:0000000000000036 pwm8Init
     /tmp/ccdifNlA.s:266    .text:0000000000000076 pwm16Init
     /tmp/ccdifNlA.s:356    .text:00000000000000cc counter0Init
     /tmp/ccdifNlA.s:387    .text:00000000000000de sendtekst
     /tmp/ccdifNlA.s:424    .text:00000000000000fc adcInit
     /tmp/ccdifNlA.s:485    .text:0000000000000134 adcStop
     /tmp/ccdifNlA.s:510    .text:0000000000000140 main
     /tmp/ccdifNlA.s:615    .bss:0000000000000000 p
     /tmp/ccdifNlA.s:621    .bss:0000000000000002 i
     /tmp/ccdifNlA.s:627    .data:0000000000000000 ref
     /tmp/ccdifNlA.s:634    .bss:0000000000000006 ADCconv
     /tmp/ccdifNlA.s:640    .bss:0000000000000008 pressOld

UNDEFINED SYMBOLS
__do_copy_data
__do_clear_bss
